# Overview

- 4チャネルのバイアス電源.
- 最大電圧は800V.
- Positive / Negativeの両方の極性に対応.
- 出力電流は20uAに制限.
- USBシリアル通信で制御可能.(現実的には手動での制御が不可能.USBシリアル通信でしか制御できない.)

> mesytec MHV-4 is a modern 4-channel high precision bias supply unit for detector bias voltages up to 800 V.
> It is designed to supply highly stable bias voltage for all types of silicon and gas detectors.
> The output current is limited to 20 uA.
> The new revision allows easy operation of large area avalanche diodes, by compensating the bias voltage with temperature.
> Temperature measurement can be performed with miniaturized NTC temperature sensors.
> The four temperatures are also available via USB or mesytec control bus.

# 操作方法

`screen` を使って制御する.( `cu` とかでも可能).

1. デバイスの確認.
```bash
$ ls /dev/ttyUSB*
/dev/ttyUSB0
```

2. `screen` で通信を開始する.
```bash
$ sudo screen /dev/ttyUSB0 9600
```

3. 次のような画面が出てくるのでCommandを送信する.
```
MHV-4>
```

4. `screen` から出るときは `CTRL` + `a` を押したあとに `k` を押す. 

## コマンド一覧

- `ON c` : Channel `c` をONにする.
- `OFF c` : Channel `c` をOFFにする.
- `SU c vvvv` : Channel `c` の電圧を `vvvv` (x 0.1V) にセットする.
    - (e.g.) `SU 0 4000` sets channel 0 to 400V .
- `SUL c vvvv` : Channel `c` の電圧リミットを `vvvv` (x 0.1V) にセットする.
    - (e.g.) `SUL 0 4000` sets voltage limit for channel 0 to 400V .
- `SIL c iiiii` : Channel `c` の電流リミットを `iiiii` (nA)
    - (e.g.) `SIL 0 10000` sets current limit channel 0 to 10000nA = 10uA .
- `SP c p` : Channel `c` の極性を Positive or Negative に設定する.
    - Positive : `p` , `+`, `1`
    - Negative : `n` , `-`, `0`
    - (e.g.) `SP 0 1` sets polarity channel 0 to positive
    - For security reasons: if HV is on, it will be switched off automatically, HV preset will be set to 0 V, polarity is switched when HV is down. After switching: set presets again to desired values.
- `AS c n` : enable ( `n=1` ) / disable ( `n=0` ) auto shutdown of channel `c`
- `SRA n` : HVの上昇速度を設定する.
    - `n = 0` : 5 V/s
    - `n = 1` : 25 V/s
    - `n = 2` : 100 V/s
    - `n = 3` : 500 V/s
- `RU c` : Channel `c` の電圧を読む.
- `RUP c` : Channel `c` のプリセット電圧を読む.
- `RUL c` : Channel `c` の電圧リミットを読む.
- `RI c` : Channel `c` の電流を読む.
- `RIL c` : Channel `c` の電流リミットを読む.
- `RP c` : Channel `c` の極性を読む.
- `RRA` : HVの上昇速度を読む.

# Refs
- https://www.mesytec.com/products/datasheets/MHV-4.pdf
- [screenのコマンドの備忘録](https://qiita.com/mgoldchild/items/e336618487eb7d90f6d4)
